DROP TABLE IF EXISTS FUNCIONARIO;
DROP TABLE IF EXISTS RESTAURANTE;
DROP TABLE IF EXISTS VOTO;

CREATE TABLE FUNCIONARIO(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR NOT NULL,
    EMAIL VARCHAR NOT NULL UNIQUE,
    SENHA VARCHAR(20) NOT NULL,
    ROLE INTEGER NOT NULL
);

CREATE TABLE RESTAURANTE(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR NOT NULL,
    DESCRICAO VARCHAR(50),
    ENDERECO VARCHAR(50) NOT NULL,
    VOTADO_DATA TIMESTAMP
);

CREATE TABLE VOTO(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RESTAURANTE_ID INTEGER NOT NULL,
    FUNCIONARIO_ID INTEGER NOT NULL,
    DATA TIMESTAMP NOT NULL,
    FOREIGN KEY (RESTAURANTE_ID) REFERENCES RESTAURANTE(ID),
    FOREIGN KEY (FUNCIONARIO_ID) REFERENCES FUNCIONARIO(ID)
)